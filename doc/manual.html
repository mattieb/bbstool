<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Band Brothers Save Tool</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="d0e1"></a>Band Brothers Save Tool</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Matt</span> <span class="surname">Behrens</span></h3><code class="email">&lt;<a href="mailto:matt@zigg.com">matt@zigg.com</a>&gt;</code></div></div><div><p class="copyright">Copyright &copy; 2006 Matt Behrens </p></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="preface"><a href="#d0e15">Preface</a></span></dt><dt><span class="chapter"><a href="#d0e53">1. Using the Save Tool</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e72">1. Installation</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e75">1.1. Microsoft Windows</a></span></dt><dt><span class="section"><a href="#other-platforms">1.2. Other Platforms</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e110">2. Accessing Your Game Save</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e113">2.1. Action Replay MAX</a></span></dt><dt><span class="section"><a href="#d0e201">2.2. GBA Movie Player M3</a></span></dt><dt><span class="section"><a href="#save-dump">2.3. Save dump</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e231">3. Using the Save Tool</a></span></dt><dd><dl><dt><span class="section"><a href="#loading-data">3.1. Opening Save Data</a></span></dt><dt><span class="section"><a href="#d0e263">3.2. Importing Songs</a></span></dt><dt><span class="section"><a href="#exporting-songs">3.3. Exporting Songs</a></span></dt><dt><span class="section"><a href="#d0e326">3.4. Exporting and Importing Game Data</a></span></dt><dt><span class="section"><a href="#d0e378">3.5. Rearranging Songs</a></span></dt><dt><span class="section"><a href="#saving-data">3.6. Saving Save Data</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e434">4. Unexplained Problems</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d0e444">2. Developing the Save Tool</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e450">1. Getting Into the Code</a></span></dt><dt><span class="section"><a href="#d0e465">2. Wish List</a></span></dt></dl></dd></dl></div><div class="preface" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="d0e15"></a>Preface</h2></div></div></div><p>A few quick thanks to various folks for making this whole thing possible:</p><div class="itemizedlist"><ul type="disc"><li><p><a href="http://jubai.sakura.ne.jp/jubai/bandbrothers/" target="_top">OUT TAKE ENSEMBLE</a>, home of the original Band Brothers Music Editor, for inspiring me to create this tool;</p></li><li><p>The guys behind <a href="http://www.python.org/" target="_top">Python</a>, <a href="http://www.wxwidgets.org/" target="_top">wxWidgets</a>, <a href="http://www.wxpython.org/" target="_top">wxPython</a>, and <a href="http://wxglade.sourceforge.net/" target="_top">wxGlade</a>, for making it relatively easy for me to put a nice user-friendly face on the whole project;</p></li><li><p>The apparently soon-to-be-reborn <a href="http://ndsart.net/" target="_top">NDSart</a>, for carrying the torch of creativity in gaming, letting me know of OUT TAKE ENSEMBLE in the first place, and hooking me up with my first guinea pigs;</p></li><li><p>And of course, <a href="http://www.nintendo.co.jp/" target="_top">Nintendo</a>, for taking a chance on Daigasso! Band Brothers in the first place and giving me my number-one reason to own a Nintendo DS for many, many months. (Now, Nintendo of America, where's our American version?)</p></li></ul></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="d0e53"></a>Chapter&nbsp;1.&nbsp;Using the Save Tool</h2></div></div></div><p>The Band Brothers Save Tool imports and exports songs created in the Nintendo DS game Daigasso! Band Brothers so that they may be exchanged with far-away users.</p><p>The tool currently supports the following methods of getting access to the save data for the game, which contains the saved songs:</p><div class="itemizedlist"><ul type="disc"><li><p>Datel Ltd.'s Action Replay MAX for GBA/DS</p></li><li><p>GBA Movie Player M3</p></li><li><p>Any other method supporting a save dump (<a href="#save-dump" title="2.3.&nbsp;Save dump">Section&nbsp;2.3, &#8220;Save dump&#8221;</a>)</p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e72"></a>1.&nbsp;Installation</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e75"></a>1.1.&nbsp;Microsoft Windows</h3></div></div></div><p>Precompiled binaries are offered for Microsoft Windows. Simply unzip all files into their own directory; there are quite a few, so keep them separate from other programs so you can easily delete the software at a later date.</p><p>To run the save tool, double-click <code class="filename">bbstool.exe</code>.</p><p>If you don't wish to use the binaries, you can use the platform-neutral method as well (<a href="#other-platforms" title="1.2.&nbsp;Other Platforms">Section&nbsp;1.2, &#8220;Other Platforms&#8221;</a>).</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="other-platforms"></a>1.2.&nbsp;Other Platforms</h3></div></div></div><p>The save tool is written in the Python language and uses the wxPython GUI toolkit. You will need the following dependencies installed on your computer:</p><div class="itemizedlist"><ul type="disc"><li><p><a href="http://www.python.org/" target="_top">Python</a> 2.4</p></li><li><p><a href="http://www.wxpython.org/" target="_top">wxPython</a> 2.6 (Unicode version on Microsoft Windows)</p></li></ul></div><p>Once you've installed these on your system, run the <code class="filename">bbstool.py</code> script to start the save tool.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e110"></a>2.&nbsp;Accessing Your Game Save</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e113"></a>2.1.&nbsp;Action Replay MAX</h3></div></div></div><p>The save tool is designed to work with the 1.04 firmware revision and above. If you have an older Action Replay MAX, get the upgrade (version 1.06 is recommended) from <a href="http://us.codejunkies.com/support_home.asp" target="_top">Datel's support site</a>; it will speed up your transfers by a factor of four or more and make your use of the save tool less painful<sup>[<a name="d0e121" href="#ftn.d0e121">1</a>]</sup>.</p><p>To get your save in a format usable by the save tool:</p><div class="procedure"><ol type="1"><li><p>Follow the procedures in your Action Replay MAX manual to back up the save to your PC Database.</p></li><li><p>The save tool works only with uncompressed saves, so you must uncompress your save. From the Action Replay software on your PC, select <span class="guimenuitem">Max Drive DS (DS)</span>, <span class="guimenuitem">Manage and swap saves</span>, <span class="guimenuitem">My MaxDrive Vault</span>. (You do not need to connect your Action Replay MAX as long as your save is already on your PC.)</p></li><li><p>Select the save you want to modify on the left and select the decompress and export button, which looks like an open vise with an arrow pointing to the left.</p></li><li><p>Select a directory to uncompress the save to and select <span class="guibutton">OK</span>. The resulting file will be named whatever your save was titled with a <code class="filename">.duc</code> extension. This file is usable with the save tool.</p></li></ol></div><p>If you don't choose to upgrade your Action Replay MAX, you will have to find and copy your save file from the <code class="filename">\Program Files\Datel\Nintendo DS - GBA Max Drive\PC</code> directory and rename it so it carries a <code class="filename">.duc</code> extension.</p><p>You are now ready to load your save into the save tool (<a href="#loading-data" title="3.1.&nbsp;Opening Save Data">Section&nbsp;3.1, &#8220;Opening Save Data&#8221;</a>).</p><p>Once you're done working with your save and have saved it to a save file (<a href="#saving-data" title="3.6.&nbsp;Saving Save Data">Section&nbsp;3.6, &#8220;Saving Save Data&#8221;</a>), you need to copy it back to your game card:</p><div class="procedure"><ol type="1"><li><p>From the Action Replay software on your PC, select <span class="guimenuitem">Max Drive DS (DS)</span>, <span class="guimenuitem">Manage and swap saves</span>, <span class="guimenuitem">My MaxDrive Vault</span>.</p></li><li><p>Select the compress and import button, which looks like a closed vise with an arrow pointing downward.</p></li><li><p>Select the save file you modified with the tool.</p></li><li><p>Follow the procedures in your Action Replay MAX manual to copy the newly edited save back to your game card.</p></li></ol></div><p>Again, if you haven't upgraded your Action Replay MAX, you will have to rename the edited file back to the correct extension and put it into the <code class="filename">\Program Files\Datel\Nintendo DS - GBA Max Drive\PC</code> directory before copying the save back to your game card.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e201"></a>2.2.&nbsp;GBA Movie Player M3</h3></div></div></div><p>If you are playing your game from your GBA Movie Player M3 instead of from your original game card, the M3 will store your game save on the CompactFlash or Secure Digital memory card you use as its storage card.</p><p>The save tool can open these directly on the card and write them back out in the same manner. When you are ready to load your data (<a href="#loading-data" title="3.1.&nbsp;Opening Save Data">Section&nbsp;3.1, &#8220;Opening Save Data&#8221;</a>) into the tool, you can find the <code class="filename">.dat</code> file that the M3 generates in the <code class="filename">ndssave</code> folder on your storage card.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="save-dump"></a>2.3.&nbsp;Save dump</h3></div></div></div><p>The save tool can also use a save dump, which is simply a file containing the contents of the save EEPROM on the game card. Such a file will be exactly 262,144 bytes in length, and by tradition is named with a <code class="filename">.sav</code> extension.</p><p>If you have a homebrew-capable Nintendo DS, you can use <a href="http://www.pat.hi-ho.ne.jp/sata68/nds.shtml#rain" target="_top">Rain</a>, which will, when booted in a Nintendo DS with the Daigasso! Band Brothers game card inserted, allow you to back up and restore the game save to one of several places, including the filesystem on a CF-based M3. Once you've done this, you can connect the storage card to your computer and load your data (<a href="#loading-data" title="3.1.&nbsp;Opening Save Data">Section&nbsp;3.1, &#8220;Opening Save Data&#8221;</a>) directly from the storage card.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e231"></a>3.&nbsp;Using the Save Tool</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="loading-data"></a>3.1.&nbsp;Opening Save Data</h3></div></div></div><p>Once you've gained access to your save data from your PC, opening it is straightforward:</p><div class="procedure"><ol type="1"><li><p>From the <span class="guimenu"><span class="accel">F</span>ile</span> menu, select <span class="guisubmenu"><span class="accel">O</span>pen</span>, and select the type of save file you are opening.</p></li><li><p>Find the save file you want to open from the file dialog.</p></li></ol></div><p>If the file loads successfully, you will see the titles of your songs appear in the main window. Slots that do not appear to contain a valid song will read <span class="guilabel">(Empty or invalid)</span>.</p><p>The save tool will do checks on the save file to make sure it is precisely what it expects before permitting you to manipulate it. If it isn't, you'll get one of several errors. If you get one and you're sure your file is intact, contact me.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e263"></a>3.2.&nbsp;Importing Songs</h3></div></div></div><p>The save tool lets you import the contents of a <code class="filename">.bbs</code> file, which contains a Daigasso! Band Brothers score, into one of the eight slots in your save. If the slot you want to use contains a song you want to keep, you should export that song first (<a href="#exporting-songs" title="3.3.&nbsp;Exporting Songs">Section&nbsp;3.3, &#8220;Exporting Songs&#8221;</a>).</p><p>To import a song:</p><div class="procedure"><ol type="1"><li><p>Select the slot you want to import the song into from the list of songs.</p></li><li><p>Select <span class="guibutton"><span class="accel">I</span>mport...</span></p></li><li><p>Find the <code class="filename">.bbs</code> file you want to import.</p></li></ol></div><p>If successful, the title of the song in the slot you selected will be replaced with the title of the song you imported.</p><p>The save tool will do checks on the score file to make sure it is indeed a valid score file before importing it into your save. If it isn't, you'll get one of several errors. If you get one and you're sure your file is intact, contact me.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="exporting-songs"></a>3.3.&nbsp;Exporting Songs</h3></div></div></div><p>You can share songs you created by exporting them to <code class="filename">.bbs</code> files. This procedure will make a copy of the song in the slot you select and create a .bbs file that you can not only share with other users of the save tool but also users of some other Band Brothers save manipulation tools (mostly Japanese).</p><p>To export a song:</p><div class="procedure"><ol type="1"><li><p>Select the slot that contains the song you want to import from the list of songs.</p></li><li><p>Select <span class="guibutton"><span class="accel">E</span>xport...</span></p></li><li><p>Find a folder to save your <code class="filename">.bbs</code> file to, give it a name, and save it.</p></li><li><p>Send your file to whomever you want to share it with.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e326"></a>3.4.&nbsp;Exporting and Importing Game Data</h3></div></div></div><p>The save tool also lets you export and import the game data block into and from <code class="filename">.bbd</code> files. The game data block contains your scores you've earned for each song, your personal information and settings, as well as what bonus songs and modes you've unlocked.</p><p>The <a href="http://sourceforge.net/projects/dbbsed/" target="_top">SourceForge project page</a> for the save tool has a game data package available for download that contains game data blocks for several permutations of unlocked game modes; importing these will erase your scores, personal information, and settings but will allow you to play modes and bonus songs you couldn't otherwise get to for whatever reason<sup>[<a name="d0e339" href="#ftn.d0e339">2</a>]</sup>.</p><p>To export your game data:</p><div class="procedure"><ol type="1"><li><p>From the <span class="guimenu"><span class="accel">F</span>ile</span> menu, choose <span class="guimenuitem"><span class="accel">E</span>xport Game Data...</span></p></li><li><p>Find a folder to save your <code class="filename">.bbd</code> file to, give it a name, and save it.</p></li></ol></div><p>Importing game data is similarly straightforward:</p><div class="procedure"><ol type="1"><li><p>From the File menu, choose Import Game Data...</p></li><li><p>Find the <code class="filename">.bbd</code> file you wish to import.</p></li></ol></div><p>The save tool will do checks on the game data file to make sure it is indeed a valid game data file before importing it into your save. If it isn't, you'll get one of several errors. If you get one and you're sure your file is intact, contact me.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e378"></a>3.5.&nbsp;Rearranging Songs</h3></div></div></div><p>If you would like to keep your songs in a particular order, such as your own compositions on top and imported songs on the bottom, the save tool can help you here as well. Once you've loaded a save file, you can rearrange songs simply by selecting them and using the <span class="guibutton">Move <span class="accel">U</span>p</span> and <span class="guibutton">Move <span class="accel">D</span>own</span> buttons.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="saving-data"></a>3.6.&nbsp;Saving Save Data</h3></div></div></div><p>Once you've done everything you wish to do to your save, you need to save it back out so you can transfer it back into your game.</p><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>Before you save, it's an excellent idea to make a backup of your original save file. Although the save tool performs many checks on the data, it's still entirely possible that your save file might be corrupted in some novel way by either the transfer process or by the save tool itself. If you have a backup, you can at least go back to the point you were at before you started using the tool if something goes wrong.</p></div><p>If you want to overwrite your original save file, simply choose <span class="guimenuitem"><span class="accel">S</span>ave</span> from the <span class="guimenu"><span class="accel">F</span>ile</span> menu.</p><p>If you want to save your changed save to a new file:</p><div class="procedure"><ol type="1"><li><p>From the <span class="guimenu"><span class="accel">F</span>ile</span> menu, select <span class="guimenuitem">Save <span class="accel">A</span>s...</span></p></li><li><p>Find a folder to save your save file to, give it a new name, and save it.</p></li></ol></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e434"></a>4.&nbsp;Unexplained Problems</h2></div></div></div><p>Most common errors will pop up a dialog explaining the error, and most will happen when you're opening or saving a save file, score, or game data file. If you can't make sense of it, and are sure you're using the tool correctly, please contact me.</p><p>Other errors, which I didn't anticipate, can cause the save tool to behave in unexplained ways. If you get one of these, please find the <code class="filename">debug.txt</code> file in the directory you started the save tool from. If it's not empty, it probably contains valuable information for me in tracking down your problem, so please send it along with any bug reports. It would be ideal if you could delete or move the file out of the way, reproduce the problem, and then send it along, just in case it's accumulated confusing information from previous problems you've had.</p></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.d0e121" href="#d0e121">1</a>] </sup>The first release of the save tool was developed using the old Action Replay MAX firmware. Save transfers using this method took <span class="emphasis"><em>8-9 minutes</em></span> using this method, each way; you could expect to spend 20 minutes just to try one new song.</p></div><div class="footnote"><p><sup>[<a name="ftn.d0e339" href="#d0e339">2</a>] </sup>For example, Abarenb&#333; Sh&#333;gun Theme and Gmen'75 require you to play the game in multiplayer mode; this requires a second Nintendo DS system and may not be accessible to some players. The Barbara Bat Theme requires you to complete Recording Ticket Level 5 in Pro mode, which is simply beyond the finger capacity of some people.</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="d0e444"></a>Chapter&nbsp;2.&nbsp;Developing the Save Tool</h2></div></div></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>End-users: read no further. This chapter only contains information for the types of people who would like to add capabilities or fix bugs in the save tool. If this doesn't sound like your idea of a fun evening, put the book down and walk away slowly.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e450"></a>1.&nbsp;Getting Into the Code</h2></div></div></div><p>The save tool is written in the Python programming language, using the wxPython toolkit (which is actually wxWidgets), and should run on any platfom that both of these exist on.</p><p>Beyond these two items, you'll need one more thing, if you plan on modifying the GUI in any way: wxGlade. wxGlade is a GUI builder for wxWidgets, and is used exclusively to build the save tool's user interface. Please take the time to learn how wxGlade works; code can only be written outside of the generated sections in the main application (these are delimited with <code class="code"># begin wxGlade</code> and <code class="code"># end wxGlade</code>). If you write code inside these sections, it will be clobbered next time wxGlade is used to update the GUI.</p><p>If you have any questions not covered here, please contact me.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e465"></a>2.&nbsp;Wish List</h2></div></div></div><p>Here's a short list of things I'd like to add to the save tool sometime. Some I even know how to do, but other pressures keep me from doing them. If you'd like to try your hand at one or more, feel free. You may want to ask me first to see if I've got any work-in-progress on them, though.</p><div class="itemizedlist"><ul type="disc"><li><p>Allow the end-user to modify the save name for Action Replay MAX save files. Currently, importing a .duc file will cause a duplicate entry to appear because the name in the Action Replay software comes from an internal name rather than the file name. This save name is already accessible but needs to be hooked up with UI, preferably on the main window.</p></li><li><p>Determine which of the sections in the game data block is the latest one (the game writes game data with a counter over one of several positions in the game data block, to lengthen the EEPROM's life as well as give some safety to the writing process). This enables a few things:</p><div class="itemizedlist"><ul type="circle"><li><p>Display the game data's user name in the main window.</p></li><li><p>Display the player's scores for each song in a separate dialog. Maybe even offer an export-to-HTML option.</p></li></ul></div></li><li><p>Some error handling that's better than <code class="filename">debug.txt</code>.</p></li></ul></div></div></div></div></body></html>